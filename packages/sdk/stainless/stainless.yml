# yaml-language-server: $schema=https://app.stainless.com/config-internal.schema.json

organization:
  name: opencode
  docs: "https://opencode.ai/docs"
  contact: "support@sst.dev"

targets:
  typescript:
    package_name: "@opencode-ai/sdk"
    production_repo: "sst/opencode-sdk-js"
    publish:
      npm: true
  go:
    package_name: opencode
    production_repo: sst/opencode-sdk-go

environments:
  production: http://localhost:54321

streaming:
  on_event:
    - kind: fallthrough
      handle: yield

resources:
  $shared:
    models:
      unknownError: UnknownError
      providerAuthError: ProviderAuthError
      messageAbortedError: MessageAbortedError
      messageOutputLengthError: MessageOutputLengthError
      apiError: ApiError

  # Global events (cross-directory)
  global:
    models:
      globalEvent: GlobalEvent
    methods:
      event:
        endpoint: get /global/event
        paginated: false
        streaming:
          param_discriminator: null

  # Instance-scoped events
  event:
    methods:
      subscribe:
        endpoint: get /event
        paginated: false
        streaming:
          param_discriminator: null

  path:
    models:
      path: Path
    methods:
      get: get /path

  app:
    models:
      app: App
    methods:
      log: post /log

  agent:
    models:
      agent: Agent
    methods:
      list: get /agent

  find:
    models:
      symbol: Symbol
    methods:
      text: get /find
      files: get /find/file
      symbols: get /find/symbol

  file:
    models:
      file: File
      fileNode: FileNode
      fileContent: FileContent

    methods:
      list: get /file
      read: get /file/content
      status: get /file/status

  config:
    models:
      config: Config
      keybindsConfig: KeybindsConfig
      mcpLocalConfig: McpLocalConfig
      mcpRemoteConfig: McpRemoteConfig
      agentConfig: AgentConfig
    methods:
      get: get /config
      update: patch /config
      providers: get /config/providers

  command:
    models:
      command: Command
    methods:
      list: get /command

  project:
    models:
      project: Project
    methods:
      list: get /project
      current: get /project/current

  # Tool resource for experimental tool endpoints
  tool:
    models:
      toolListItem: ToolListItem
    methods:
      ids: get /experimental/tool/ids
      list: get /experimental/tool

  # Instance management
  instance:
    methods:
      dispose: post /instance/dispose

  # Provider resource
  provider:
    models:
      provider: Provider
      model: Model
      providerAuthMethod: ProviderAuthMethod
      providerAuthAuthorization: ProviderAuthAuthorization
    methods:
      list: get /provider
      auth: get /provider/auth
    subresources:
      oauth:
        methods:
          authorize: post /provider/{id}/oauth/authorize
          callback: post /provider/{id}/oauth/callback

  # MCP server management
  mcp:
    models:
      mcpStatus: McpStatus
      mcpStatusConnected: McpStatusConnected
      mcpStatusDisabled: McpStatusDisabled
      mcpStatusFailed: McpStatusFailed
    methods:
      status: get /mcp
      add: post /mcp

  # LSP server status
  lsp:
    models:
      lspStatus: LspStatus
    methods:
      status: get /lsp

  # Formatter status
  formatter:
    models:
      formatterStatus: FormatterStatus
    methods:
      status: get /formatter

  # Authentication
  auth:
    models:
      authInfo: Auth
      oauth: OAuth
      apiAuth: ApiAuth
      wellKnownAuth: WellKnownAuth
    methods:
      set: put /auth/{id}

  session:
    models:
      session: Session
      sessionStatus: SessionStatus
      message: Message
      part: Part
      textPart: TextPart
      textPartInput: TextPartInput
      filePart: FilePart
      filePartInput: FilePartInput
      filePartSourceText: FilePartSourceText
      filePartSource: FilePartSource
      fileSource: FileSource
      symbolSource: SymbolSource
      toolPart: ToolPart
      agentPart: AgentPart
      agentPartInput: AgentPartInput
      reasoningPart: ReasoningPart
      stepStartPart: StepStartPart
      stepFinishPart: StepFinishPart
      snapshotPart: SnapshotPart
      assistantMessage: AssistantMessage
      userMessage: UserMessage
      toolStatePending: ToolStatePending
      toolStateRunning: ToolStateRunning
      toolStateCompleted: ToolStateCompleted
      toolStateError: ToolStateError
      todo: Todo
      fileDiff: FileDiff

    methods:
      get: get /session/{id}
      list: get /session
      status: get /session/status
      children: get /session/{id}/children
      todo: get /session/{id}/todo
      create: post /session
      delete: delete /session/{id}
      init: post /session/{id}/init
      fork: post /session/{id}/fork
      abort: post /session/{id}/abort
      share: post /session/{id}/share
      unshare: delete /session/{id}/share
      diff: get /session/{id}/diff
      summarize: post /session/{id}/summarize
      message: get /session/{id}/message/{messageID}
      messages: get /session/{id}/message
      prompt: post /session/{id}/message
      command: post /session/{id}/command
      shell: post /session/{id}/shell
      update: patch /session/{id}
      revert: post /session/{id}/revert
      unrevert: post /session/{id}/unrevert

    subresources:
      permissions:
        models:
          permission: Permission
        methods:
          respond: post /session/{id}/permissions/{permissionID}

  tui:
    methods:
      appendPrompt: post /tui/append-prompt
      submitPrompt: post /tui/submit-prompt
      clearPrompt: post /tui/clear-prompt
      openHelp: post /tui/open-help
      openSessions: post /tui/open-sessions
      openThemes: post /tui/open-themes
      openModels: post /tui/open-models
      executeCommand: post /tui/execute-command
      showToast: post /tui/show-toast
      publish: post /tui/publish
    subresources:
      control:
        methods:
          next: get /tui/control/next
          response: post /tui/control/response

settings:
  disable_mock_tests: true
  license: MIT

security:
  - {}

readme:
  example_requests:
    default:
      type: request
      endpoint: get /session
      params: {}
    headline:
      type: request
      endpoint: get /session
      params: {}
    streaming:
      type: request
      endpoint: get /event
      params: {}
